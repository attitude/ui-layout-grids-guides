(function(g,a){var i=[],l=[],b=false,s=g.document.body.parentElement.clientHeight,m=g.document.body.parentElement.clientWidth,f=function f(w){var v=w.getClientRects();if(v.length){v={bottom:parseInt(s-w.offsetTop-v[0].height,10),left:parseInt(v[0].left,10),height:parseInt(v[0].height,10),right:parseInt(m-v[0].right,10),top:parseInt(w.offsetTop,10),width:parseInt(v[0].width,10)};return v}return null},t=function t(v,y,x){if(!y){g.console.warn("Skipping guide: no name given");return}if(!x||Object.prototype.toString.call(x)!=="[object Array]"||x.length!==4||x.indexOf("auto")<0){g.console.warn("Skipping guide: no offset given or not an array of 4 offsets");return}if(!v){return}var w=g.document.createElement("div");w.setAttribute("class","ui-layout-grids-guides-guide-"+y);if(x[0]!=="auto"){w.style.top=x[0]+"px"}if(x[1]!=="auto"){w.style.right=x[1]+"px"}if(x[2]!=="auto"){w.style.bottom=x[2]+"px"}if(x[3]!=="auto"){w.style.left=x[3]+"px"}g.document.body.appendChild(w);l.push(w)},o=function o(x,A,z,w,v,y){t(x,A+"-horizontal",[z||0,w||0,"auto",y||0]);t(x,A+"-vertical",[z||0,w||0,v||0,"auto"]);t(x,A+"-horizontal",["auto",w||0,v||0,y||0]);t(x,A+"-vertical",[z||0,"auto",v||0,y||0])},n=function n(v,y,x){if(!y){g.console.warn("Skipping guide: no name given");return}if(!x&&x!==0){g.console.warn("Skipping guide: no offset given");return}if(!v){return}var w=g.document.createElement("div");w.setAttribute("class","ui-layout-grids-guides-"+y);w.style.top=x+"px";w.style.left=v.left+"px";w.style.right=v.right+"px";g.document.body.appendChild(w);l.push(w)},c=function c(w,y,z,x){if(!y){g.console.warn("Skipping guide: no name given");return}if(!w){return}if(!z){z=0}if(!x){x=20}var v;for(v=z;v<w.height+z;v=v+x){n(w,y,v)}},r=function r(E,F,A,y,w,D,B,z){if(!E){g.console.warn("Skipping columns grid: elementRects missing");return}if(!F){g.console.warn("Skipping guide: no name given");return}if(A<=0){g.console.warn("Skipping columns: no columns");return}var v,x,C;if(!E){return}A=parseInt(A,10);y=parseInt(y,10);y=y>=0?y:0;v=E.width-z-D;height=E.height-w-B;w=parseInt(w+E.top,10);D=parseInt(D+E.right,10);B=parseInt(B+E.bottom,10);z=parseInt(z+E.left,10);x=(v-((A-1)*y))/A;if(g.console){g.console.log({elementRects:E,height:height,width:v,colWidth:x,columns:A,gutter:y,marginTop:w,marginRight:D,marginBottom:B,marginLeft:z})}for(C=0;C<A;C=C+1){o(E,F,w,D+(x+y)*(A-(C+1)),B,z+(x*C)+y*C)}},h=function h(v){var x,w,y;v=v||{};for(x=1;x<arguments.length;x=x+1){y=arguments[x];if(!y){continue}for(w in y){if(y.hasOwnProperty(w)){if(typeof y[w]==="object"){h(v[w],y[w])}else{v[w]=y[w]}}}}return v},e=function e(A){var z=f(A),v=A.uiGridsOptions.length,x={},w,y;for(y=0;y<v;y=y+1){if(!A.uiGridsOptions[y].hasOwnProperty("rules")){g.console.warn("Skipping option: missing rules attribute");continue}if(A.uiGridsOptions[y].hasOwnProperty("minWidth")&&z.width<A.uiGridsOptions[y].minWidth){continue}if(A.uiGridsOptions[y].hasOwnProperty("minHeight")&&z.height<A.uiGridsOptions[y].minHeight){continue}x=h(x,A.uiGridsOptions[y].rules)}if(x.hasOwnProperty("maxWidth")&&elementClientWidth-x.maxWidth>x.marginLeft+x.marginRight){w=parseInt((elementRectsClientWidth-x.maxWidth-x.marginLeft-x.marginRight)/2,10);x.marginLeft+=w;x.marginRight+=w}r(z,"column",(x.columns>1&&x.columns)||1,x.columnsGutter||0,x.marginTop||0,x.marginRight||0,x.marginBottom||0,x.marginLeft||0);r(z,"padding",(x.columns>1&&x.columns)||1,(x.columnsGutter>=0&&x.columnsPadding>=0&&x.columnsPadding*2+x.columnsGutter)||0,x.marginTop||0,(x.marginRight>=0&&x.columnsPadding>=0&&x.marginRight+x.columnsPadding)||0,x.marginBottom||0,(x.marginLeft>=0&&x.columnsPadding>=0&&x.marginLeft+x.columnsPadding)||0);o(z,"margin",x.marginTop+z.top||0,x.marginRight+z.right||0,x.marginBottom+z.bottom||0,x.marginLeft+z.left||0);c(z,"guide-baseline",z.top||0,x.baselineOffset||20);c(z,"guide-baseline-half",(x.marginTop||x.marginTop===0)&&x.baselineOffset&&z.top+x.baselineOffset/2||10,x.baselineOffset||20)},u=function u(){var v=l.length,w;for(w=0;w<v;w=w+1){l[w].parentNode.removeChild(l[w])}l=[]},q=function q(){if(g.console){g.console.log("Attach!")}u();if(!b){return}s=g.document.body.parentElement.clientHeight;m=g.document.body.parentElement.clientWidth;var w,v=i.length;for(w=0;w<v;w+=1){e(i[w])}},p=function p(){var v;v=g.document.createElement("link");v.rel="stylesheet";v.type="text/css";v.href=a||"https://rawgit.com/attitude/ui-layout-grids-guides/master/ui-layout-grids-guides.css";g.document.body.appendChild(v);v=g.document.createElement("script");v.src="https://cdnjs.cloudflare.com/ajax/libs/mousetrap/1.4.6/mousetrap.min.js";g.document.body.appendChild(v);v.addEventListener("load",function(){if(!Mousetrap){return}Mousetrap.bind("mod+;",function(){k()})},false);v=g.document.createElement("a");v.className="ui-layout-guides-toggle";v.addEventListener("click",k,false);g.document.body.appendChild(v);q()},k=function k(){if(b){g.document.body.parentElement.className=g.document.body.parentElement.className.replace(/ ui-layout-grids-guides-visible/,"")}else{g.document.body.parentElement.className+=" ui-layout-grids-guides-visible"}b=!b;q()},d=[{minWidth:0,rules:{marginLeft:8,marginRight:8,marginTop:0,marginBottom:0,baselineOffset:16,columns:1,columnsGutter:8,columnsPadding:16}},{minWidth:160,rules:{columns:2}},{minWidth:240,rules:{columns:3}},{minWidth:320,rules:{marginLeft:11,marginRight:11,baselineOffset:22,columns:4,columnsGutter:11,columnsPadding:22}},{minWidth:480,rules:{columns:6}},{minWidth:640,rules:{marginLeft:22,marginRight:22,marginTop:22,marginBottom:22,columns:12}},{minWidth:1024,rules:{maxWidth:1024-22-22}},{minWidth:1440,rules:{marginLeft:28,marginRight:28,marginTop:28,marginBottom:28,baselineOffset:28,columnsGutter:15,columns:12}}],j;p();g.addEventListener("resize",function(){g.clearTimeout(j);j=g.setTimeout(q,120)},false);g.uiGrids={watch:function(w,v){if(!v||!w instanceof Element){if(g.console){g.console.warn("Watch: Not an HTML Element",w)}return}w.uiGridsOptions=v;if(i.indexOf(w)<0){i.push(w)}},unwatch:function(w){if(!w instanceof Element){if(g.console){g.console.warn("Unwatch: Not an HTML Element",w)}return}var v=i.indexOf(w);if(v>0){i.splice(v,1)}}}}(window,typeof uiLayoutGridGuidesLocalCss==="string"?uiLayoutGridGuidesLocalCss:null));